# Ns-3 PPDU Visualizer

[English](doc/README_en.md) | [中文](doc/README_ch.md)

一个基于 **Qt** 的 **ns-3 PHY/MAC 层 PPDU 活动**可视化工具，旨在提供无线网络仿真领域的**交互式、基于时间的 PPDU 级可视化分析**。

本仓库提供一个**面向研究的可视化前端**，将 ns-3 的 PHY/MAC 事件转化为**清晰、可读的时间线与统计指标**。它更适合用于无线系统研究中的**调试、分析与报告输出**，而非通用网络动画工具。

### ✅ 关键亮点
- **PPDU 优先分析**：聚焦 PHY/MAC 层 PPDU 行为与碰撞。
- **时间精确可视化**：纳秒级对齐，支持缩放与精细定位。
- **高效交互诊断**：悬停/拖拽/缩放/选择流程优化。
- **场景扩展能力**：支持自定义仿真场景与项目文件。

### 🎯 典型使用场景
- 分析**碰撞模式**与信道竞争异常。
- 对比不同配置下的**节点吞吐差异**。
- 进行**时间窗口化利用率分析**定位瓶颈。
- 生成**论文/报告图像**。

![Demo](gif/Default.gif)
本项目专注于 **PPDU 时间线、吞吐折线图、自定义仿真场景** 等能力，支持：
- 节点视角的 PPDU 传输
- 信道视角的 PPDU 传输
- PPDU 传输冲突标注
- 帧类型识别
- 时间范围选择与自动缩放
- 吞吐量 / 信道利用率统计

> 该示例展示了 ns-3 场景中的 PPDU 时间线与吞吐图（examples/wireless/wifi-txop-aggregation.cc）
 ![demo](gif/display_1.gif)



- > 除了 PPDU 级分析之外，本工具还提供吞吐曲线，帮助你定位无线网络中的潜在瓶颈。
  ![demo_2](gif/plot.gif)
---

## ✨ 功能特性

- 📊 **PPDU 时间线视图**  
  沿时间轴可视化 PPDU 传输，分为 **节点视角** 和 **信道视角**。

- 🧠 **基于通道的重叠布局**  
  自动将重叠的 PPDU 分割到不同通道以避免遮挡，并标注重叠关系。

- 🖱 **丰富的交互功能**
  - **鼠标悬停** 查看 PPDU 详情（帧类型、持续时间、fail-reason、节点 MAC 等）
  - > 当鼠标悬停在代表 PPDU 的三角形上时，可查看帧类型、持续时间、节点 MAC 等详细信息，同时会高亮对应信道。
 ![demo](img/demo.jpg)
它是一个**研究与调试工具**，而非完整的网络模拟器或 NetAnim 替代品。
  - **左键拖动** 平移时间线
  - **鼠标滚轮** 缩放并调整时间轴粒度
  - **右键拖动** 选择时间范围并计算统计指标
  - > ![demo_drag](gif/plot_drag.gif)

- 📐 **时间范围分析**
  对选定时间区间（需启用全量模式）统计：
  - 信道繁忙时间
  - 空闲时间
  - 利用率
  - 吞吐量（Mbps）
  - > ![demo_range](img/utiliazaion.jpg)

- 🪟 **叠加式 UI（NetAnim 风格）**
  半透明浮动叠加层用于：
  - PPDU 信息
  - 图例
  - 统计数据

- 🖼 **保存为图片**  
  将当前时间线视图保存为 PNG/JPG。

---

## 🧩 工作流程（概念层）
1. **ns-3 仿真**输出 PHY/MAC PPDU 追踪数据（JSON/CSV）。
2. **解析层**将原始日志转化为 PPDU 对象。
3. **布局引擎**分配通道并计算重叠关系。
4. **Qt UI 层**渲染时间线、叠加层与图表。
5. **交互层**提供缩放/选择/统计能力。

该设计使可视化与仿真**解耦**，便于跨实验复现分析。

---
## 设计你的仿真场景（构建自己的模拟环境）


> 如果不想通过编写代码创建场景，你可以在 **Simulation Mode Selection** 页面点击 **New(Experimental)** 按钮。但正如提示所述，该功能仍处于实验阶段，某些特殊场景下可能无法正常工作。
我们正在持续完善该 DIY 模式，关键问题在于流量配置与移动模型。后续会持续更新。
- > 欢迎提出 issue 或建议！
![demo_diy](img/generalSettings.jpg)
> AP 与 STA 的设置可在配置页面中修改。
- ![config](img/config.jpg)
## 从文件加载

> 该功能允许从项目文件（.nsproj）加载自定义场景。项目文件可由 Ns3Visualizer UI 生成。
> 项目文件包含拓扑、移动模型、流量配置等必要信息。
Ns3Visualizer UI 会加载该项目并展示对应场景。

> ⚠️ **Note**  
> 使用 AppImage 版本时，Qt UI 与 ns-3 的相对路径不固定，需要在 UI 中手动设置路径。

---

## 🔧 依赖

- **Qt 6 及相关工具链**（Qt 5 可通过小改动兼容）
- **C++17** 或更高标准
- **ns-3.46** 或更高版本
- Linux 环境

> ⚠️ **Note**  
> 本仓库**不包含** ns-3 的完整源码，仅提供 contrib 模块源码。如需完整 ns-3，请前往 [ns-3 官网](https://www.nsnam.org/) 下载。

---

## 🚀 快速运行（预编译包）

- **AppImage**（桌面环境）  
  直接运行 Ns3Visualizer.AppImage 即可打开 UI。

- **无桌面环境可执行包**  

```bash
# 将Ns3Visualizer/放入contrib/目录下
./ns3 configure
./ns3 build
./build/Ns3VisualizerApp

```

> Qt 应用只负责**可视化展示**，不会编译或运行 ns-3。
> 若需更多使用说明，请参考 [用户指南](Tutorial_ch.md) 或 [User Guide](Tutorial_en.md)。

---

## 🧭 推荐工作流
1. **生成 trace**（在 ns-3 中启用 PPDU/PHY/MAC 追踪）。
2. **在 UI 中加载** trace 文件。
3. **查看时间线与吞吐图**。
4. **选择时间范围**进行统计分析。
5. **导出图像**用于报告或调试。

---

## 📥 数据输入

PPDU 数据通常来自 ns-3 的 trace hook 或自定义日志输出（JSON/CSV）。
每条 PPDU 记录通常包含：
- 节点或 AP 标识
- 起止时间（ns）
- 帧类型
- 聚合 MPDU 数量
- Payload 大小

### ✅ 数据质量建议
- 确保单节点内时间戳严格单调。
- 帧类型需明确，便于图例分组。
- 单位保持一致（推荐 ns）。

---

## 🧪 项目状态

- ✔ PPDU 时间线与叠加 UI
- ✔ 时间范围统计
- ✔ 交互操作
- ⏳ 复杂流量配置
- ⏳ MLO

---

## 🎯 设计目标

- 聚焦 PHY/MAC 行为而非拓扑动画
- 纳秒级时间对齐
- 便于研究与扩展

---

## 📜 许可证

本项目采用 **MIT License**。

---

## 🙋 作者

- **张恺**  
  u202414527@hust.edu.cn
- **宓呈祥**  
  michengxiang@hust.edu.cn

---

## ⭐ 致谢

- ns-3 Simulator
- NetAnim（UI 风格灵感）
- Qt Framework

> 如果你在研究、课程或工具中使用了该项目，欢迎在论文或报告中致谢。

---

## 🤝 贡献
欢迎贡献，尤其是：
- 新的 trace 适配器（自定义日志格式）
- 场景配置能力增强
- 大规模仿真的 UI/UX 优化
- 文档与可复现实验指引

请通过 Issue 或 Pull Request 提交建议，并附带清晰的复现步骤。

---

## 📌 引用建议
如果你在学术工作中使用该工具，建议将其作为软件成果进行引用，并注明作者。

---

## 📮 联系方式
如需交流或合作，请联系上方作者。# Ns-3 PPDU Visualizer
